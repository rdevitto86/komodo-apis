import{b as U,h as M,e as X,g as F,i as P,H as Q,j as y,k as L,l as k,m as R,C as W,n as Z,o as q,q as $,v as B,E as T,w as H,x as j,y as ee,z as re,A as z,B as ne,D as fe,F as le,G as V,I as ae,J as G,K as J,L as D,M as ie,N as ue,O as se}from"./DiUamYel.js";function ce(e,l){return l}function oe(e,l,a){for(var d=[],h=l.length,v,u=l.length,n=0;n<h;n++){let o=l[n];J(o,()=>{if(v){if(v.pending.delete(o),v.done.add(o),v.pending.size===0){var _=e.outrogroups;O(z(v.done)),_.delete(v),_.size===0&&(e.outrogroups=null)}}else u-=1},!1)}if(u===0){var f=d.length===0&&a!==null;if(f){var i=a,s=i.parentNode;ie(s),s.append(i),e.items.clear()}O(l,!f)}else v={pending:new Set(l),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(v)}function O(e,l=!0){for(var a=0;a<e.length;a++)ue(e[a],l)}var Y;function pe(e,l,a,d,h,v=null){var u=e,n=new Map;M&&X();var f=null,i=ee(()=>{var t=a();return re(t)?t:t==null?[]:z(t)}),s,o=!0;function _(){r.fallback=f,ve(r,s,u,l,d),f!==null&&(s.length===0?f.f&T?(f.f^=T,S(f,null,u)):G(f):J(f,()=>{f=null}))}var b=U(()=>{s=F(i);var t=s.length;let A=!1;if(M){var I=P(u)===Q;I!==(t===0)&&(u=y(),L(u),k(!1),A=!0)}for(var p=new Set,w=$,N=j(),g=0;g<t;g+=1){M&&R.nodeType===W&&R.data===Z&&(u=R,A=!0,k(!1));var x=s[g],C=d(x,g),c=o?null:n.get(C);c?(c.v&&q(c.v,x),c.i&&q(c.i,g),N&&w.skipped_effects.delete(c.e)):(c=te(n,o?u:Y??(Y=B()),x,C,g,h,l,a),o||(c.e.f|=T),n.set(C,c)),p.add(C)}if(t===0&&v&&!f&&(o?f=H(()=>v(u)):(f=H(()=>v(Y??(Y=B()))),f.f|=T)),M&&t>0&&L(y()),!o)if(N){for(const[E,K]of n)p.has(E)||w.skipped_effects.add(K.e);w.oncommit(_),w.ondiscard(()=>{})}else _();A&&k(!0),F(i)}),r={effect:b,items:n,outrogroups:null,fallback:f};o=!1,M&&(u=R)}function ve(e,l,a,d,h){var c;var v=l.length,u=e.items,n=e.effect.first,f,i=null,s=[],o=[],_,b,r,t;for(t=0;t<v;t+=1){if(_=l[t],b=h(_,t),r=u.get(b).e,e.outrogroups!==null)for(const E of e.outrogroups)E.pending.delete(r),E.done.delete(r);if(r.f&T)if(r.f^=T,r===n)S(r,null,a);else{var A=i?i.next:n;r===e.effect.last&&(e.effect.last=r.prev),r.prev&&(r.prev.next=r.next),r.next&&(r.next.prev=r.prev),m(e,i,r),m(e,r,A),S(r,A,a),i=r,s=[],o=[],n=i.next;continue}if(r.f&D&&G(r),r!==n){if(f!==void 0&&f.has(r)){if(s.length<o.length){var I=o[0],p;i=I.prev;var w=s[0],N=s[s.length-1];for(p=0;p<s.length;p+=1)S(s[p],I,a);for(p=0;p<o.length;p+=1)f.delete(o[p]);m(e,w.prev,N.next),m(e,i,w),m(e,N,I),n=I,i=N,t-=1,s=[],o=[]}else f.delete(r),S(r,n,a),m(e,r.prev,r.next),m(e,r,i===null?e.effect.first:i.next),m(e,i,r),i=r;continue}for(s=[],o=[];n!==null&&n!==r;)(f??(f=new Set)).add(n),o.push(n),n=n.next;if(n===null)continue}r.f&T||s.push(r),i=r,n=r.next}if(e.outrogroups!==null){for(const E of e.outrogroups)E.pending.size===0&&(O(z(E.done)),(c=e.outrogroups)==null||c.delete(E));e.outrogroups.size===0&&(e.outrogroups=null)}if(n!==null||f!==void 0){var g=[];if(f!==void 0)for(r of f)r.f&D||g.push(r);for(;n!==null;)!(n.f&D)&&n!==e.fallback&&g.push(n),n=n.next;var x=g.length;if(x>0){var C=null;oe(e,g,C)}}}function te(e,l,a,d,h,v,u,n){var f=u&ne?u&fe?V(a):le(a,!1,!1):null,i=u&ae?V(h):null;return{v:f,i,e:H(()=>(v(l,f??a,i??h,n),()=>{e.delete(d)}))}}function S(e,l,a){if(e.nodes)for(var d=e.nodes.start,h=e.nodes.end,v=l&&!(l.f&T)?l.nodes.start:a;d!==null;){var u=se(d);if(v.before(d),d===h)return;d=u}}function m(e,l,a){l===null?e.effect.first=a:l.next=a,a===null?e.effect.last=l:a.prev=l}export{pe as e,ce as i};
